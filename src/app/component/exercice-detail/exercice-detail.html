@if (loading) {
    <div class="loading-container">
        <mat-progress-spinner mode="indeterminate" diameter="50" color="primary"></mat-progress-spinner>
        <p>Chargement de l'exercice...</p>
    </div>
} @else if (exercice) {
    <div class="back-button">
        <button mat-raised-button color="primary" routerLink="/exercices" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
            ⬅ Retour aux exercices
        </button>
    </div>
    <div class="exercice-detail-card">

        <!-- Badges -->
        <div class="badge-row">
            <span class="badge type">{{ exercice.type }}</span>
            <span class="badge diff diff-{{ exercice.difficulte | lowercase }}">{{ exercice.difficulte }}</span>
        </div>

        <!-- Énoncé -->
        <h2 class="exercice-enonce">{{ exercice.enonce }}</h2>

        <!-- Réponse -->
        <div class="answer-section">
            <input
                    type="text"
                    placeholder="Votre réponse..."
                    [(ngModel)]="userAnswer"
                    (keyup.enter)="checkAnswer()" />

            <button class="btn-validate" (click)="checkAnswer()">Valider</button>
        </div>

        <!-- Feedback -->
        @if (feedbackMessage) {
            <div class="feedback" [ngClass]="{ correct: isCorrect, incorrect: !isCorrect }">
                {{ feedbackMessage }}
            </div>
        }

    </div>
} @else {
    <p>Aucun exercice trouvé.</p>
}
