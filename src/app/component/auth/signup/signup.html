<form (ngSubmit)="signup()" class="signup-form" #form="ngForm">
  <!-- Rôle -->
  <div class="role-choice">
    <label>
      <input type="radio" name="role" value="ELEVE" [(ngModel)]="role" required />
      Élève
    </label>
    <label>
      <input type="radio" name="role" value="ENSEIGNANT" [(ngModel)]="role" required />
      Enseignant
    </label>
  </div>

  <!-- Pseudo -->
  <input type="text" placeholder="Pseudo" name="pseudo" [(ngModel)]="pseudo" #pseudoInput="ngModel" required/>
  <div class="error" *ngIf="pseudoInput.dirty && getPseudoError()">{{ getPseudoError() }}</div>

  <!-- Email -->
  <input type="email" placeholder="Email" [(ngModel)]="email" name="email" #emailInput="ngModel" required email />
  <div class="error" *ngIf="emailInput.invalid && (emailInput.touched || emailInput.dirty)">
    Adresse email invalide.
  </div>


  <!-- Mot de passe -->
  <input type="password" placeholder="Mot de passe" [(ngModel)]="password" name="password" #passwordInput="ngModel" required/>
  <div class="error" *ngIf="passwordInput.touched && !passwordIsStrong()"> Le mot de passe doit contenir au moins 8 caractères, une majuscule, une minuscule, un chiffre et un caractère spécial. </div>

  <!-- Confirmation mot de passe -->
  <input type="password" placeholder="Confirmer le mot de passe" [(ngModel)]="confirmPassword" name="confirmPassword" #confirmPasswordInput="ngModel" required />
  <div class="error" *ngIf="password !== confirmPassword && (confirmPasswordInput.touched || confirmPasswordInput.dirty)">
    Les mots de passe ne correspondent pas.
  </div>

  <!-- Niveau scolaire (si rôle = élève) -->
  <div *ngIf="role === 'ELEVE'">
    <select [(ngModel)]="niveau" name="niveau" required>
      <option value="" disabled >Choisir un niveau</option>
      <option *ngFor="let n of niveaux" [value]="n.value">{{ n.label }}</option>
    </select>
  </div>

  <button type="submit" [disabled]="form.invalid">S'inscrire</button>
</form>
